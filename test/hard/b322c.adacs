-- $B322C -- adapted from Babbage test #41
 
-- FOR LOOPS, LOOP LOOPS, AND DYNAMIC ARRAYS
-- 1 THROUGH 18; 18 THROUGH 1; 1,49,169,4, ETC;
-- 1,4,9,...,289
 
PACKAGE Main IS
 
BODY
     NUMROWS,NUMCOLUMNS,DIMV1 : INTEGER;
BEGIN
  WRITE("Test $B322C (w/ output):"; NEXT);
 
  NUMROWS := 3; NUMCOLUMNS := 6; DIMV1 := 17;
  WRITE("NUMROWS=";NUMROWS;"NUMCOLS=";NUMCOLUMNS;"DIMV1=";DIMV1;NEXT);
     DECLARE
        BALUE,ROW,COLUMN : INTEGER;
        MATRIX1,MATRIX2 : ARRAY (1..NUMROWS,1..NUMCOLUMNS) OF INTEGER;
        VECTOR1         : ARRAY (1..DIMV1) OF INTEGER;
        MATRIX3         : ARRAY (1..NUMROWS,1..NUMCOLUMNS) OF INTEGER;
     Begin
       WRITE ("MATRIX1";NEXT);
       BALUE:=0;
       FOR ROW IN 1 .. NUMROWS
       LOOP
        FOR COLUMN IN 1 .. NUMCOLUMNS
        LOOP BALUE:=BALUE+1;
           MATRIX1(ROW,COLUMN):=BALUE;
           WRITE(MATRIX1(ROW,COLUMN);NEXT);
        END LOOP;
       END LOOP;
 
       WRITE("MATRIX2";NEXT);
       BALUE:=NUMROWS*NUMCOLUMNS+1;
       FOR ROW IN REVERSE 1 .. NUMROWS
       LOOP
         FOR COLUMN IN 1 .. NUMCOLUMNS
         LOOP  BALUE:=BALUE-1;
             MATRIX2(ROW,COLUMN):=BALUE;
             WRITE(MATRIX2(ROW,COLUMN);NEXT);
         END LOOP;
       END LOOP;
 
       WRITE("MATRIX3";NEXT);
       FOR COLUMN IN 1 .. NUMCOLUMNS
       LOOP FOR ROW IN 1 .. NUMROWS
          LOOP MATRIX3(ROW,COLUMN):=MATRIX1(ROW,COLUMN)*MATRIX2(ROW,COLUMN);
               WRITE(MATRIX3(ROW,COLUMN);NEXT);
          END LOOP;
       END LOOP;
       WRITE ("VECTOR1";NEXT);
       BALUE:=0;
 
FIN:   LOOP
          BALUE:=BALUE+1;
          VECTOR1(BALUE):=BALUE*BALUE;
          WRITE(VECTOR1(BALUE);NEXT);
          EXIT FIN WHEN BALUE = DIMV1;
       END LOOP;
     END;
 
END Main;
