-- $F126C -- adapted from the following ACVC test(s):
--   C64007A.ADA
 
-- CHECK THAT A SUBPROGRAM CAN BE CALLED
-- RECURSIVELY AND THAT NON-LOCAL VARIABLES AND
-- CONSTANTS ARE PROPERLY ACCESSED FROM WITHIN
-- RECURSIVE INVOCATIONS.
 
PACKAGE Main IS
 
BODY
 
     TWENTY : CONSTANT INTEGER := 20;
     C11    : CONSTANT INTEGER := 1;
     I1, I2 : INTEGER ;
 
     PROCEDURE RECURSE (I1A : INTEGER; I2 : IN OUT INTEGER) IS
          C1 : CONSTANT INTEGER := 5;
     BEGIN
          IF I1A < TWENTY THEN
               RECURSE (I1A+C1, I2);
               I1 := I1 + C11;
               I2 := I2 + I1A;
          END IF;
     END RECURSE;
 
BEGIN
     WRITE("Test $F126C:"; NEXT);
 
     I1 := 0;  I2 := 0;
     RECURSE (0, I2);
 
     IF I1 /= 4 OR I2 /= 30 THEN
         WRITE(NEXT; "==> RECURSIVE PROCEDURE INVOCATIONS WITH GLOBAL DATA ACCESS");
         WRITE(NEXT; "    NOT PERFORMED CORRECTLY");
     END IF;
 
     WRITE(NEXT);
END Main;
