-- $F421C -- adapted from Babbage test #87
 
-- Check unconstrained array parameters
-- CAN YOU STAY WITHIN BOUNDS? --
-- FOR LOOPS AND UNCONSTRAINED ARRAYS --
-- -3 -- 1; 4 -- 8; 10 -- 20; 10 -- 20;
-- -10 -- -1; -20 -- -11  --
 
PACKAGE Main IS
 
BODY
 
  LOWBOUND,HIGHBOUND,START,I : INTEGER;
 
  type UA is array (INTEGER range <>) of INTEGER;
 
  PROCEDURE PRINTARRAY(ARAY : IN OUT UA;
                       LOWBOUND, HIGHBOUND : IN OUT INTEGER) is
        I : INTEGER;
  BEGIN
        FOR I IN  LOWBOUND .. HIGHBOUND LOOP
            WRITE ("ARRAY ELEMENT";I;"  =";ARAY(I);NEXT);
        END LOOP;
  END;
 
  PROCEDURE FILLINARRAY (ARAY : IN OUT UA;
                         LOWBOUND,HIGHBOUND,START : IN OUT INTEGER)is
    I,FILLIN : INTEGER;
  BEGIN
    FILLIN:=START;
    FOR I IN LOWBOUND .. HIGHBOUND LOOP
        ARAY(I):=FILLIN;
        FILLIN:=FILLIN+1;
    END LOOP;
    PRINTARRAY(ARAY,LOWBOUND,HIGHBOUND);
  END;
 
BEGIN
    WRITE("Test $F421C:"; NEXT);
 
    FOR I IN REVERSE 1 .. 3 LOOP
        CASE I IS
        WHEN 3 => LOWBOUND:=-3; HIGHBOUND:=1; START:=4;
        WHEN 2 => LOWBOUND:=10; HIGHBOUND:=20; START:=10;
        WHEN 1 => LOWBOUND:=-10; HIGHBOUND:=-1; START:=-20;
        END CASE;
        DECLARE
          ARAY : ARRAY (LOWBOUND..HIGHBOUND) OF INTEGER;
        BEGIN
           FILLINARRAY (ARAY,LOWBOUND,HIGHBOUND,START);
        END;
    END LOOP ;
    WRITE(NEXT);
END Main;
