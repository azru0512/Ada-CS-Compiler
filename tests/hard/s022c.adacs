-- $S022C -- adapted from the following ACVC test(s):
--   CB1003A-AB.ADA
 
-- CHECK THAT A PROGRAMMER-DEFINED EXCEPTION HAVING THE SAME NAME AS
--    A PREDEFINED EXCEPTION IS DISTINCT FROM THE PREDEFINED EXCEPTION.
 
PACKAGE Main IS
 
     FLOW_COUNT : INTEGER := 0;
 
BODY BEGIN
     WRITE("Test $S022C:"; NEXT);
 
     BEGIN
 
          DECLARE
               CONSTRAINT_ERROR : EXCEPTION;
               I8 : INTEGER RANGE 1..10 ;
          BEGIN
               FLOW_COUNT := FLOW_COUNT + 1;
               I8 := 20; -- PREDEFINED EXCEPTION RAISED HERE.
               WRITE(NEXT; "==> PREDEFINED CONSTRAINT_ERROR NOT RAISED FOR RANGE ERROR");
 
          EXCEPTION
               WHEN CONSTRAINT_ERROR =>  -- HANDLER FOR USER-DEFINED
                                         -- EXCEPTION.
                    FLOW_COUNT := FLOW_COUNT - 1;
                    WRITE(NEXT; "==> PREDEFINED AND PROGRAMMER-DEFINED EXCEPTIONS NOT DISTINCT");
          END;
 
     EXCEPTION
          WHEN CONSTRAINT_ERROR =>   -- PREDEFINED EXCEPTION.
               FLOW_COUNT := FLOW_COUNT + 1;
          WHEN OTHERS =>
               WRITE(NEXT; "==> WRONG EXCEPTION RAISED");
     END;
 
     IF FLOW_COUNT /= 2 THEN
          WRITE(NEXT; "==> INCORRECT FLOW_COUNT VALUE");
     END IF;
 
     WRITE(NEXT);
 
EXCEPTION
     WHEN CONSTRAINT_ERROR =>
          WRITE(NEXT; "==> EXCEPTION RAISED IN WRONG SCOPE");
          WRITE(NEXT);
     WHEN OTHERS =>
          WRITE(NEXT; "==> WRONG EXCEPTION RAISED IN WRONG SCOPE");
          WRITE(NEXT);
 
END Main;
